<% @questions.each do |question| %>
<div class="card bg-light mb-3" style="max-width: 150rem;">
  <div class="card-header">      
    <h5 class="card-title"><%= question.title.capitalize %></h5>
  </div>
  <div class="card-body">
    <p class="card-text"><%= question.markdown_content %></p>
    <p class="card-text">
      <% if question.topics.exists? %>
        <% question.topics.each do |topic| %>
          <span class="btn btn-dark">
            <%= link_to(topic.name , search_questions_search_path(search: topic.name) , method: :get, remote: true, class: "filter-topics") %>
          </span>
        <% end %>
        <% #FIXME_AB: make these topis a link. click on that would filter questions belongs to these topic,, params[:search]: (topic.name) -%>
      <% end %>
    <p class="card-text">Post by -<%= question.user.name %></p>
    <p>
      <a class="btn btn-primary" data-toggle="collapse" href="#collapseAnswers-<%= question.id%>" role="button" aria-expanded="false" aria-controls="collapseExample">
        Answers(<%= question.answers.size %>)
      </a>
      <a class="btn btn-primary" data-toggle="collapse" href="#collapseComments-<%= question.id%>" role="button" aria-expanded="false" aria-controls="collapseExample">
        Comments(<%= question.comments.size %>)
      </a>
    </p>
    <div class="collapse" id="collapseAnswers-<%= question.id%>">
      <div class="card card-body">
          <div class="answer-list">
          <% @answers = question.answers %>
          <%= render partial: "shared/answers" %>
        </div>
      </div>
    </div>
    <div class="collapse" id="collapseComments-<%= question.id%>">
      <div class="card card-body">
        <div class="question-comment-list flex-container">
          <% @comments = question.comments %>
          <%= render partial: "shared/comments" %>
        </div>
      </div>
    </div>

    <%= form_with(model: question, url: question_answers_path(question.id), remote: true, method: :post, class: "form-inline my-2 my-lg-0" ) do |form| %>
      <div class="form-group answer-div">
        <%= form.text_field :answer, class: "form-control mr-sm-2", placeholder: "Answer the question", autocomplete: "off" %>
        <%= form.submit "Answer", class: "btn btn-secondary my-2 my-sm-0 submit-answer" %>
      </div>
    <% end %>
    <br>
    <%= form_with(model: question, url: question_comments_path(question.id), remote: true, method: :post, class: "form-inline my-2 my-lg-0" ) do |form| %>
      <div class="form-group comment-div">
        <%= form.text_field :comment, class: "form-control mr-sm-2 submit-comment", placeholder: "Comment on question", autocomplete: "off" %>
        <%= form.submit "Comment", class: "btn btn-secondary my-2 my-sm-0 submit-comment-button" %>
      </div>
    <% end %>

    </p>
  </div>
</div>
<% end %>
<br>
<center><%= will_paginate @questions, class: "flickr_pagination" %></center>
