<% if not @answers.load.exists? %>
No answer yet.
<% else %>
<% @answers.each do |answer| %>
<div class="card bg-light mb-3 rounded" style="max-width: 150rem;">
  <div class="card-body">
    <%= answer.content %>
    -<%= answer.user.name %>
    <% if answer.comments %>
      <div class="answer-comment-list flex-container">
        <% @comments = answer.comments %>
        <%= render partial: "shared/comments" %>
      </div>
    <% end %>
    <% if logged_in? %>
      <div class="comment-result-answer-<%= answer.id%>" role="alert"> </div>
      <%= form_with(model: answer, url: answer_comments_path(answer.id), remote: true, method: :post, class: "form-inline my-2 my-lg-0" ) do |form| %>
        <div class="form-group answer-comment-div" data-result="comment-result-answer-<%= answer.id%>">
          <%= form.text_area :comment, class: "form-control mr-sm-2 form-control-sm textarea-rounded", placeholder: "Comment on answer", autocomplete: "off" %>
          <%= form.submit "Comment", class: "btn btn-secondary my-2 my-sm-0 btn-sm rounded" %>
        </div>
      <% end %>
      <div class="vote-answer mt-3">
        <div class="vote-answer-buttons">
          <%= button_to "Like", answer_votes_path(answer.id), class: "btn btn-sm answer-#{answer.id} rounded", data: {id: "answer-#{answer.id}" }, method: :post %>
          <small><p class="answer-<%= answer.id %>-count" data-type="like" ></p></small>
          <%= button_to 'Dislike', answer_votes_path(answer.id, false),class: "btn btn-sm answer-#{answer.id} rounded", data: {id: "answer-#{answer.id}" }, method: :post %>
          <small><p class="answer-<%= answer.id %>-count" data-type="like" ></p></small>
          <a class="btn btn-sm rounded" href="" data-toggle="modal" role="button" data-target="#modalReportAbuse-<%= answer.id%>">
            Report
          </a>  
        </div>
      </div>

      <div class="modal modalReportAbuse fade" id="modalReportAbuse-<%= answer.id%>" tabindex="-1" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content rounded">
            <div class="modal-header">
              <h4 class="modal-title">Report Abuse</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <%= form_with(url: report_abuse_path("answer", answer.id), method: "get") do |f| %>
              <div class="modal-body">
                <div class="form-group">
                  <%= f.label :reason %>
                  <%= f.text_area :reason, class: "form-control textarea-rounded"%>
                </div>
                <div class="report-abuse-result" role="alert"> </div>
              </div>
              <div class="modal-footer">
                <%= f.submit("Report Abuse", class: "btn btn-primary rounded") %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

</div>
<% end %>
<br>
<% end %>